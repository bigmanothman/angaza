<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Employer Registration | ANGAZA Professional Hiring Platform</title>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
    /* ====== CSS Reset & Variables ====== */
    :root {
        --primary: #0066cc;
        --primary-dark: #0052a3;
        --primary-light: #e6f2ff;
        --primary-soft: rgba(0, 102, 204, 0.08);
        --secondary: #1a1a2e;
        --accent: #00a8cc;
        --light: #f8fafc;
        --gray-50: #f9fafb;
        --gray-100: #f1f5f9;
        --gray-200: #e2e8f0;
        --gray-300: #cbd5e1;
        --gray-400: #94a3b8;
        --gray-500: #64748b;
        --gray-600: #475569;
        --gray-700: #334155;
        --gray-800: #1e293b;
        --gray-900: #0f172a;
        --success: #10b981;
        --success-light: #d1fae5;
        --success-soft: rgba(16, 185, 129, 0.08);
        --warning: #f59e0b;
        --warning-light: #fef3c7;
        --warning-soft: rgba(245, 158, 11, 0.08);
        --danger: #ef4444;
        --danger-light: #fee2e2;
        --danger-soft: rgba(239, 68, 68, 0.08);
        --info: #3b82f6;
        --info-light: #dbeafe;
        --info-soft: rgba(59, 130, 246, 0.08);
        --border: 1px solid #e2e8f0;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-md: 0 6px 8px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --shadow-glow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        --radius: 8px;
        --radius-lg: 12px;
        --radius-xl: 16px;
        --radius-full: 9999px;
        --transition: all 0.2s ease;
        --transition-bounce: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
        color: var(--gray-900);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        padding: 2rem 1.5rem;
        position: relative;
        overflow-x: hidden;
    }

    /* ====== Animated Background ====== */
    .bg-pattern {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        overflow: hidden;
        pointer-events: none;
    }

    .bg-grid {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: 
            linear-gradient(var(--gray-200) 1px, transparent 1px),
            linear-gradient(to right, var(--gray-200) 1px, transparent 1px);
        background-size: 40px 40px;
        opacity: 0.2;
        animation: gridMove 20s linear infinite;
    }

    @keyframes gridMove {
        0% { transform: translateY(0); }
        100% { transform: translateY(40px); }
    }

    .bg-glow {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 20% 30%, rgba(0, 102, 204, 0.03) 0%, transparent 50%),
                    radial-gradient(circle at 80% 70%, rgba(0, 168, 204, 0.03) 0%, transparent 50%);
        animation: glowPulse 8s ease-in-out infinite alternate;
    }

    @keyframes glowPulse {
        0% { opacity: 0.3; }
        100% { opacity: 0.6; }
    }

    /* ====== Header ====== */
    .header {
        position: fixed;
        top: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-bottom: var(--border);
        z-index: 1000;
        padding: 0.875rem 0;
        box-shadow: var(--shadow-sm);
        animation: slideDown 0.5s ease-out;
    }

    @keyframes slideDown {
        from { transform: translateY(-100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    .header-container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .logo {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        text-decoration: none;
        transition: var(--transition-bounce);
    }

    .logo:hover {
        transform: scale(1.02);
    }

    .logo-icon {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        border-radius: var(--radius);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 1.125rem;
        box-shadow: var(--shadow-md);
        transition: var(--transition-bounce);
    }

    .logo:hover .logo-icon {
        transform: rotate(5deg) scale(1.1);
        box-shadow: var(--shadow-lg);
    }

    .logo-text {
        font-size: 1.375rem;
        font-weight: 700;
        color: var(--gray-900);
        letter-spacing: -0.015em;
    }

    .nav {
        display: flex;
        align-items: center;
        gap: 2.5rem;
    }

    .nav-link {
        color: var(--gray-600);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.9375rem;
        transition: var(--transition);
        position: relative;
        padding: 0.5rem 0;
    }

    .nav-link:hover {
        color: var(--primary);
    }

    /* ====== Signup Container ====== */
    .signup-container {
        position: relative;
        z-index: 10;
        width: 100%;
        max-width: 700px;
        margin: 80px auto 40px;
        animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .signup-card {
        background: white;
        border-radius: var(--radius-xl);
        padding: 2.5rem;
        box-shadow: var(--shadow-xl);
        border: var(--border);
        position: relative;
        overflow: hidden;
    }

    .signup-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
    }

    /* ====== Logo in Card ====== */
    .card-logo {
        display: flex;
        justify-content: center;
        margin-bottom: 1.5rem;
    }

    .card-logo-icon {
        width: 64px;
        height: 64px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
        box-shadow: var(--shadow-md);
        transition: var(--transition-bounce);
    }

    .card-logo-icon:hover {
        transform: scale(1.05) rotate(5deg);
        box-shadow: var(--shadow-lg);
    }

    /* ====== Form Header ====== */
    .form-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .form-header h2 {
        font-size: 1.875rem;
        font-weight: 700;
        color: var(--gray-900);
        margin-bottom: 0.5rem;
    }

    .form-header p {
        color: var(--gray-600);
        font-size: 0.95rem;
    }

    /* ====== Progress Steps ====== */
    .progress-steps {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2.5rem;
        position: relative;
    }

    .progress-step {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        z-index: 1;
    }

    .progress-step::before {
        content: '';
        position: absolute;
        top: 15px;
        left: -50%;
        width: 100%;
        height: 2px;
        background: var(--gray-200);
        z-index: -1;
    }

    .progress-step:first-child::before {
        display: none;
    }

    .step-indicator {
        width: 32px;
        height: 32px;
        background: white;
        border: 2px solid var(--gray-300);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.875rem;
        color: var(--gray-600);
        margin-bottom: 0.5rem;
        transition: var(--transition-bounce);
    }

    .progress-step.active .step-indicator {
        background: var(--primary);
        border-color: var(--primary);
        color: white;
        transform: scale(1.1);
        box-shadow: var(--shadow-glow);
    }

    .progress-step.completed .step-indicator {
        background: var(--success);
        border-color: var(--success);
        color: white;
    }

    .step-label {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--gray-600);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .progress-step.active .step-label {
        color: var(--primary);
    }

    /* ====== Form Sections ====== */
    .form-section {
        background: var(--gray-50);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin-bottom: 2rem;
        border: var(--border);
        transition: var(--transition);
        animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
        from { opacity: 0; transform: translateX(-10px); }
        to { opacity: 1; transform: translateX(0); }
    }

    .form-section:hover {
        border-color: var(--primary-light);
        box-shadow: var(--shadow-md);
    }

    .section-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: var(--border);
    }

    .section-header i {
        width: 32px;
        height: 32px;
        background: var(--primary-light);
        color: var(--primary);
        border-radius: var(--radius);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        transition: var(--transition-bounce);
    }

    .form-section:hover .section-header i {
        transform: scale(1.1) rotate(5deg);
        background: var(--primary);
        color: white;
    }

    .section-header h3 {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--gray-900);
    }

    /* ====== Form Grid ====== */
    .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }

    .form-group {
        margin-bottom: 1.25rem;
    }

    .form-group.full-width {
        grid-column: span 2;
    }

    .form-label {
        display: block;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--gray-700);
        margin-bottom: 0.5rem;
    }

    .form-label i {
        color: var(--primary);
        margin-right: 0.5rem;
        font-size: 0.8125rem;
    }

    .input-wrapper {
        position: relative;
        display: flex;
        align-items: center;
    }

    .input-wrapper i:not(.eye-icon) {
        position: absolute;
        left: 1rem;
        color: var(--gray-400);
        font-size: 1rem;
        transition: var(--transition);
        pointer-events: none;
    }

    .input-wrapper input,
    .input-wrapper select,
    .input-wrapper textarea {
        width: 100%;
        padding: 0.875rem 1rem 0.875rem 2.75rem;
        border: 2px solid var(--gray-200);
        border-radius: var(--radius-lg);
        font-family: 'Inter', sans-serif;
        font-size: 0.9375rem;
        color: var(--gray-900);
        background: white;
        transition: var(--transition);
    }

    .input-wrapper select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2364748b' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        padding-right: 2.75rem;
    }

    .input-wrapper textarea {
        min-height: 120px;
        resize: vertical;
        padding-top: 1rem;
    }

    .input-wrapper input:focus,
    .input-wrapper select:focus,
    .input-wrapper textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: var(--shadow-glow);
    }

    .input-wrapper input:focus + i:not(.eye-icon),
    .input-wrapper select:focus ~ i,
    .input-wrapper textarea:focus + i:not(.eye-icon) {
        color: var(--primary);
        transform: scale(1.1);
    }

    .input-wrapper input::placeholder,
    .input-wrapper select::placeholder,
    .input-wrapper textarea::placeholder {
        color: var(--gray-400);
    }

    /* Password toggle */
    .eye-icon {
        position: absolute;
        right: 1rem;
        background: none;
        border: none;
        color: var(--gray-400);
        cursor: pointer;
        padding: 0.25rem;
        transition: var(--transition);
        z-index: 2;
    }

    .eye-icon:hover {
        color: var(--primary);
        transform: scale(1.1);
    }

    /* File input customization */
    .input-wrapper input[type="file"] {
        padding: 0.75rem 1rem 0.75rem 2.75rem;
        background: var(--gray-50);
        border-style: dashed;
    }

    .input-wrapper input[type="file"]::-webkit-file-upload-button {
        display: none;
    }

    .input-wrapper input[type="file"]::file-selector-button {
        display: none;
    }

    /* ====== File Hint ====== */
    .file-hint {
        font-size: 0.75rem;
        color: var(--gray-500);
        margin-top: 0.25rem;
        margin-left: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .file-hint i {
        color: var(--info);
    }

    /* ====== Character Counter ====== */
    .char-counter {
        font-size: 0.75rem;
        color: var(--gray-500);
        margin-top: 0.25rem;
        text-align: right;
    }

    .char-counter.warning {
        color: var(--warning);
    }

    .char-counter.danger {
        color: var(--danger);
    }

    /* ====== Password Strength ====== */
    .password-strength {
        margin-top: 0.5rem;
        display: none;
    }

    .strength-bar-container {
        width: 100%;
        height: 4px;
        background: var(--gray-200);
        border-radius: var(--radius-full);
        overflow: hidden;
        margin-bottom: 0.25rem;
    }

    .strength-bar {
        height: 100%;
        width: 0;
        border-radius: var(--radius-full);
        transition: all 0.3s ease;
    }

    .strength-bar.weak { width: 25%; background: var(--danger); }
    .strength-bar.fair { width: 50%; background: var(--warning); }
    .strength-bar.good { width: 75%; background: var(--info); }
    .strength-bar.strong { width: 100%; background: var(--success); }

    .strength-text {
        font-size: 0.75rem;
        color: var(--gray-600);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .strength-label {
        font-weight: 600;
    }

    /* ====== Username Availability ====== */
    .username-feedback {
        font-size: 0.75rem;
        margin-top: 0.25rem;
        margin-left: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    .username-feedback.available {
        color: var(--success);
    }

    .username-feedback.unavailable {
        color: var(--danger);
    }

    .username-feedback i {
        font-size: 0.75rem;
    }

    /* ====== Terms Checkbox ====== */
    .terms-group {
        margin: 1.5rem 0;
        padding: 1.25rem;
        background: var(--gray-50);
        border-radius: var(--radius-lg);
        border: var(--border);
        transition: var(--transition);
    }

    .terms-group:hover {
        background: white;
        border-color: var(--primary-light);
    }

    .checkbox-wrapper {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
    }

    .checkbox-wrapper input[type="checkbox"] {
        width: 18px;
        height: 18px;
        accent-color: var(--primary);
        border-radius: 4px;
        margin-top: 2px;
        cursor: pointer;
    }

    .checkbox-wrapper label {
        font-size: 0.875rem;
        color: var(--gray-700);
        line-height: 1.5;
        cursor: pointer;
        flex: 1;
    }

    .checkbox-wrapper a {
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
        transition: var(--transition);
    }

    .checkbox-wrapper a:hover {
        color: var(--primary-dark);
        text-decoration: underline;
    }

    /* ====== Alert Messages ====== */
    .alert {
        padding: 1rem;
        border-radius: var(--radius-lg);
        margin-bottom: 1.5rem;
        display: none;
        align-items: center;
        gap: 0.75rem;
        font-size: 0.875rem;
        animation: slideInAlert 0.3s ease-out;
    }

    @keyframes slideInAlert {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .alert.error {
        background: var(--danger-light);
        border: 1px solid var(--danger-soft);
        color: var(--danger);
    }

    .alert.success {
        background: var(--success-light);
        border: 1px solid var(--success-soft);
        color: var(--success);
    }

    .alert i {
        font-size: 1rem;
    }

    .alert-content {
        flex: 1;
    }

    .alert-title {
        font-weight: 600;
        margin-bottom: 0.125rem;
    }

    .alert-message {
        color: var(--gray-700);
    }

    /* ====== Buttons ====== */
    .btn-group {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .btn {
        padding: 0.875rem 1.5rem;
        border-radius: var(--radius-lg);
        font-weight: 600;
        font-size: 0.9375rem;
        cursor: pointer;
        transition: var(--transition-bounce);
        border: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        text-decoration: none;
        font-family: 'Inter', sans-serif;
        flex: 1;
        position: relative;
        overflow: hidden;
    }

    .btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .btn:hover::before {
        width: 300px;
        height: 300px;
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        box-shadow: var(--shadow-md);
    }

    .btn-primary:hover:not(:disabled) {
        background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    .btn-primary:active:not(:disabled) {
        transform: translateY(0);
    }

    .btn-secondary {
        background: white;
        border: 2px solid var(--gray-300);
        color: var(--gray-700);
    }

    .btn-secondary:hover:not(:disabled) {
        border-color: var(--primary);
        color: var(--primary);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .btn i {
        font-size: 0.9375rem;
        transition: var(--transition-bounce);
    }

    .btn:hover i {
        transform: translateX(4px) scale(1.1);
    }

    /* ====== Login Link ====== */
    .login-section {
        text-align: center;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: var(--border);
    }

    .login-section p {
        color: var(--gray-600);
        font-size: 0.9375rem;
        margin-bottom: 0.5rem;
    }

    .login-link {
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .login-link:hover {
        color: var(--primary-dark);
        gap: 0.75rem;
    }

    .login-link i {
        font-size: 0.8125rem;
    }

    /* ====== Trust Badges ====== */
    .trust-badges {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-top: 2rem;
    }

    .trust-badge {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--gray-600);
        font-size: 0.8125rem;
    }

    .trust-badge i {
        color: var(--success);
        font-size: 0.875rem;
    }

    /* ====== Toast Notification ====== */
    .toast-notification {
        position: fixed;
        top: 100px;
        right: 30px;
        background: white;
        border-radius: var(--radius-lg);
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        box-shadow: var(--shadow-xl);
        border: var(--border);
        transform: translateX(150%);
        transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        z-index: 2000;
        max-width: 400px;
        width: calc(100% - 60px);
        border-left: 4px solid var(--primary);
        animation: slideInRight 0.3s ease-out;
    }

    @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    .toast-notification.show {
        transform: translateX(0);
    }

    .toast-notification.success {
        border-left-color: var(--success);
    }

    .toast-notification.error {
        border-left-color: var(--danger);
    }

    .toast-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .toast-content {
        flex: 1;
    }

    .toast-title {
        font-size: 0.9375rem;
        font-weight: 600;
        color: var(--gray-900);
        margin-bottom: 0.125rem;
    }

    .toast-message {
        font-size: 0.8125rem;
        color: var(--gray-600);
    }

    .toast-close {
        background: none;
        border: none;
        color: var(--gray-400);
        cursor: pointer;
        padding: 0.25rem;
        transition: var(--transition);
    }

    .toast-close:hover {
        color: var(--gray-900);
        transform: scale(1.1);
    }

    /* ====== Footer ====== */
    .footer {
        position: relative;
        z-index: 10;
        text-align: center;
        color: var(--gray-600);
        font-size: 0.8125rem;
        max-width: 700px;
        margin-top: 2rem;
    }

    .footer a {
        color: var(--gray-700);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
    }

    .footer a:hover {
        color: var(--primary);
    }

    /* ====== Loading States ====== */
    .signup-card.loading {
        position: relative;
        pointer-events: none;
    }

    .signup-card.loading::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
        animation: loadingBar 1.5s infinite;
    }

    @keyframes loadingBar {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }

    .signup-card.shake {
        animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    .signup-card.success {
        animation: successPulse 0.6s ease;
    }

    @keyframes successPulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.01); }
        100% { transform: scale(1); }
    }

    /* ====== Spinner ====== */
    .spinner {
        display: inline-block;
        width: 18px;
        height: 18px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* ====== Responsive ====== */
    @media (max-width: 768px) {
        .header {
            display: none;
        }

        .signup-container {
            margin-top: 20px;
        }

        .signup-card {
            padding: 1.5rem;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .form-group.full-width {
            grid-column: span 1;
        }

        .form-header h2 {
            font-size: 1.5rem;
        }

        .progress-steps {
            display: none;
        }

        .btn-group {
            flex-direction: column;
        }

        .trust-badges {
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
        }

        .toast-notification {
            top: 20px;
            right: 20px;
            left: 20px;
            width: auto;
        }
    }

    @media (max-width: 480px) {
        body {
            padding: 1rem;
        }

        .signup-card {
            padding: 1.25rem;
        }

        .card-logo-icon {
            width: 56px;
            height: 56px;
            font-size: 1.5rem;
        }

        .form-section {
            padding: 1.25rem;
        }

        .section-header h3 {
            font-size: 1rem;
        }

        .input-wrapper input,
        .input-wrapper select,
        .input-wrapper textarea {
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            font-size: 0.875rem;
        }

        .checkbox-wrapper {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }
    }

    /* ====== Accessibility ====== */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    input:focus-visible,
    button:focus-visible,
    select:focus-visible,
    textarea:focus-visible {
        outline: 2px solid var(--primary);
        outline-offset: 2px;
    }

    /* ====== Print Styles ====== */
    @media print {
        .header,
        .footer,
        .btn-group,
        .trust-badges {
            display: none;
        }

        .signup-card {
            box-shadow: none;
            border: 1px solid #000;
        }
    }
</style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-pattern">
        <div class="bg-grid"></div>
        <div class="bg-glow"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">A</div>
                <div class="logo-text">ANGAZA</div>
            </a>
            
            <nav class="nav">
                <a href="index.html" class="nav-link">Home</a>
                <a href="works.html" class="nav-link">Find Work</a>
                <a href="workers.html" class="nav-link">Find Workers</a>
                <a href="shining_zone.html" class="nav-link">Shining Zone</a>
            </nav>
        </div>
    </header>

    <!-- Main Signup Container -->
    <div class="signup-container">
        <div class="signup-card" id="signupCard">
            <!-- Logo -->
            <div class="card-logo">
                <div class="card-logo-icon">
                    <i class="fas fa-building"></i>
                </div>
            </div>

            <!-- Form Header -->
            <div class="form-header">
                <h2>Employer Registration</h2>
                <p>Create your company account and start finding top talent</p>
            </div>

            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="progress-step active">
                    <div class="step-indicator">1</div>
                    <span class="step-label">Contact</span>
                </div>
                <div class="progress-step">
                    <div class="step-indicator">2</div>
                    <span class="step-label">Company</span>
                </div>
                <div class="progress-step">
                    <div class="step-indicator">3</div>
                    <span class="step-label">Security</span>
                </div>
                <div class="progress-step">
                    <div class="step-indicator">4</div>
                    <span class="step-label">Documents</span>
                </div>
            </div>

            <!-- Alert Messages -->
            <div id="errorMsg" class="alert error" role="alert">
                <i class="fas fa-exclamation-circle"></i>
                <div class="alert-content">
                    <div class="alert-title">Error</div>
                    <div class="alert-message" id="errorText"></div>
                </div>
            </div>

            <div id="successNote" class="alert success" role="alert">
                <i class="fas fa-check-circle"></i>
                <div class="alert-content">
                    <div class="alert-title">Success</div>
                    <div class="alert-message">Company account created! Redirecting...</div>
                </div>
            </div>

            <!-- Signup Form -->
            <form id="signupForm" onsubmit="event.preventDefault();">
                <!-- Contact Person Section -->
                <div class="form-section">
                    <div class="section-header">
                        <i class="fas fa-user-tie"></i>
                        <h3>Contact Person Details</h3>
                    </div>
                    
                    <div class="form-grid">
                        <!-- Full Name -->
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-user"></i>
                                Full Name
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-user"></i>
                                <input 
                                    id="fullName" 
                                    type="text" 
                                    placeholder="e.g., John Doe" 
                                    autocomplete="name"
                                    required
                                >
                            </div>
                        </div>

                        <!-- Position/Title -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-id-card"></i>
                                Position
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-id-card"></i>
                                <input 
                                    id="position" 
                                    type="text" 
                                    placeholder="e.g., HR Manager" 
                                    autocomplete="organization-title"
                                    required
                                >
                            </div>
                        </div>

                        <!-- Phone -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-phone"></i>
                                Phone
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-phone"></i>
                                <input 
                                    id="phone" 
                                    type="tel" 
                                    placeholder="+255 700 000 000" 
                                    autocomplete="tel"
                                    required
                                >
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-envelope"></i>
                                Work Email
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-envelope"></i>
                                <input 
                                    id="email" 
                                    type="email" 
                                    placeholder="you@company.com" 
                                    autocomplete="email"
                                    required
                                >
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Company Details Section -->
                <div class="form-section">
                    <div class="section-header">
                        <i class="fas fa-building"></i>
                        <h3>Company Information</h3>
                    </div>
                    
                    <div class="form-grid">
                        <!-- Company Name -->
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-landmark"></i>
                                Company Name
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-landmark"></i>
                                <input 
                                    id="companyName" 
                                    type="text" 
                                    placeholder="Legal company name" 
                                    autocomplete="organization"
                                    required
                                >
                            </div>
                        </div>

                        <!-- Registration Number -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-file-contract"></i>
                                Registration #
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-file-contract"></i>
                                <input 
                                    id="registrationNumber" 
                                    type="text" 
                                    placeholder="Business registration"
                                >
                            </div>
                        </div>

                        <!-- Industry -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-industry"></i>
                                Industry
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-industry"></i>
                                <select id="industry" required>
                                    <option value="" disabled selected>Select industry</option>
                                    <option value="technology">Technology</option>
                                    <option value="finance">Finance & Banking</option>
                                    <option value="healthcare">Healthcare</option>
                                    <option value="education">Education</option>
                                    <option value="manufacturing">Manufacturing</option>
                                    <option value="retail">Retail & E-commerce</option>
                                    <option value="hospitality">Hospitality & Tourism</option>
                                    <option value="construction">Construction</option>
                                    <option value="agriculture">Agriculture</option>
                                    <option value="telecom">Telecommunications</option>
                                    <option value="transport">Transport & Logistics</option>
                                    <option value="energy">Energy & Utilities</option>
                                    <option value="consulting">Consulting</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>

                        <!-- Company Size -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-users"></i>
                                Company Size
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-users"></i>
                                <select id="companySize" required>
                                    <option value="" disabled selected>Select size</option>
                                    <option value="1-10">1-10 employees</option>
                                    <option value="11-50">11-50 employees</option>
                                    <option value="51-200">51-200 employees</option>
                                    <option value="201-500">201-500 employees</option>
                                    <option value="501-1000">501-1000 employees</option>
                                    <option value="1000+">1000+ employees</option>
                                </select>
                            </div>
                        </div>

                        <!-- Website -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-globe"></i>
                                Website
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-globe"></i>
                                <input 
                                    id="website" 
                                    type="url" 
                                    placeholder="https://example.com"
                                >
                            </div>
                        </div>

                        <!-- Location -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-map-marker-alt"></i>
                                Location
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-map-marker-alt"></i>
                                <input 
                                    id="location" 
                                    type="text" 
                                    placeholder="City, Country" 
                                    autocomplete="address-level2"
                                    required
                                >
                            </div>
                        </div>

                        <!-- Company Description -->
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-align-left"></i>
                                Company Description
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-align-left"></i>
                                <textarea 
                                    id="companyDescription" 
                                    placeholder="Tell us about your company, mission, and values..."
                                    maxlength="500"
                                ></textarea>
                            </div>
                            <div class="char-counter" id="charCount">0/500 characters</div>
                        </div>
                    </div>
                </div>

                <!-- Account Security Section -->
                <div class="form-section">
                    <div class="section-header">
                        <i class="fas fa-shield-alt"></i>
                        <h3>Account Security</h3>
                    </div>
                    
                    <div class="form-grid">
                        <!-- Username -->
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-id-badge"></i>
                                Username
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-id-badge"></i>
                                <input 
                                    id="username" 
                                    type="text" 
                                    placeholder="Choose a unique username" 
                                    autocomplete="username"
                                    required
                                >
                            </div>
                            <div id="usernameFeedback" class="username-feedback"></div>
                        </div>

                        <!-- Password -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-lock"></i>
                                Password
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-lock"></i>
                                <input 
                                    id="password" 
                                    type="password" 
                                    placeholder="Min. 8 characters" 
                                    autocomplete="new-password"
                                    required
                                >
                                <i id="togglePwd" class="fas fa-eye eye-icon"></i>
                            </div>
                        </div>

                        <!-- Confirm Password -->
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-lock"></i>
                                Confirm Password
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-lock"></i>
                                <input 
                                    id="confirmPassword" 
                                    type="password" 
                                    placeholder="Re-enter password" 
                                    autocomplete="new-password"
                                    required
                                >
                                <i id="toggleConfirmPwd" class="fas fa-eye eye-icon"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Password Strength Indicator -->
                    <div class="password-strength" id="passwordStrength">
                        <div class="strength-bar-container">
                            <div class="strength-bar" id="strengthFill"></div>
                        </div>
                        <div class="strength-text">
                            <span class="strength-label" id="strengthLabel">Password strength</span>
                            <span id="strengthText"></span>
                        </div>
                    </div>
                </div>

                <!-- Company Documents Section -->
                <div class="form-section">
                    <div class="section-header">
                        <i class="fas fa-file-upload"></i>
                        <h3>Company Documents (Optional)</h3>
                    </div>
                    
                    <div class="form-grid">
                        <!-- Company Logo -->
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-image"></i>
                                Company Logo
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-image"></i>
                                <input 
                                    id="companyLogo" 
                                    type="file" 
                                    accept="image/*"
                                >
                            </div>
                            <div class="file-hint">
                                <i class="fas fa-info-circle"></i>
                                JPG, PNG or GIF • Max 5MB
                            </div>
                        </div>

                        <!-- Business License -->
                        <div class="form-group full-width">
                            <label class="form-label">
                                <i class="fas fa-file-certificate"></i>
                                Business License
                            </label>
                            <div class="input-wrapper">
                                <i class="fas fa-file-certificate"></i>
                                <input 
                                    id="businessLicense" 
                                    type="file" 
                                    accept=".pdf,.jpg,.jpeg,.png"
                                >
                            </div>
                            <div class="file-hint">
                                <i class="fas fa-info-circle"></i>
                                PDF or Image • Max 10MB
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Terms & Conditions -->
                <div class="terms-group">
                    <div class="checkbox-wrapper">
                        <input id="terms" type="checkbox" required>
                        <label for="terms">
                            I agree to the <a href="terms.html">Employer Terms & Conditions</a> and 
                            <a href="privacy.html">Privacy Policy</a>, and confirm that I have authority 
                            to represent this company.
                        </label>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="btn-group">
                    <button id="backBtn" class="btn btn-secondary" type="button">
                        <i class="fas fa-arrow-left"></i>
                        Back
                    </button>
                    <button id="signupBtn" class="btn btn-primary" type="button">
                        Create Company Account
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </form>

            <!-- Login Link -->
            <div class="login-section">
                <p>Already have a company account?</p>
                <a href="login.html" class="login-link">
                    Sign in here
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>

            <!-- Trust Badges -->
            <div class="trust-badges">
                <div class="trust-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>Secure verification</span>
                </div>
                <div class="trust-badge">
                    <i class="fas fa-lock"></i>
                    <span>Encrypted data</span>
                </div>
                <div class="trust-badge">
                    <i class="fas fa-clock"></i>
                    <span>5-min setup</span>
                </div>
                <div class="trust-badge">
                    <i class="fas fa-check-circle"></i>
                    <span>Free to join</span>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>
                <a href="platform_owner.html">
                    © 2026 ANGAZA. All rights reserved. Powered by Othman Almas Mwiha
                </a>
            </p>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toastNotification" class="toast-notification"></div>

    <!-- Firebase + App logic (PRESERVED - NO CHANGES TO BACKEND) -->
    <script type="module">
        // [ALL BACKEND CODE PRESERVED - EXACTLY THE SAME]
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import {
            getAuth,
            createUserWithEmailAndPassword,
            sendEmailVerification,
            updateProfile
        } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import {
            getFirestore,
            doc,
            setDoc,
            collection,
            query,
            where,
            getDocs,
            serverTimestamp
        } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
        import {
            getStorage,
            ref as storageRef,
            uploadBytes,
            getDownloadURL
        } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBm4uimZ4UNhT_c-t0Dt0WLUwgmHHIMzzk",
            authDomain: "angazasystem.firebaseapp.com",
            projectId: "angazasystem",
            storageBucket: "angazasystem.appspot.com",
            messagingSenderId: "191988119746",
            appId: "1:191988119746:web:aa050634bc5d57b1bde35b",
            measurementId: "G-2RN3CLME03"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        const el = id => document.getElementById(id);
        const errorMsg = el('errorMsg');
        const errorText = el('errorText');
        const successNote = el('successNote');
        const signupBtn = el('signupBtn');
        const backBtn = el('backBtn');
        const passwordStrength = el('passwordStrength');
        const strengthFill = el('strengthFill');
        const strengthText = el('strengthText');
        const charCount = el('charCount');

        function showError(msg) {
            errorMsg.style.display = 'flex';
            errorText.textContent = msg;
            successNote.style.display = 'none';
        }

        function clearError() {
            errorMsg.style.display = 'none';
            errorText.textContent = '';
        }

        function showSuccess(msg) {
            successNote.style.display = 'flex';
            successNote.querySelector('.alert-message').textContent = msg;
            errorMsg.style.display = 'none';
        }

        function showToast(message, type = 'info') {
            const existingToast = document.getElementById('toastNotification');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.id = 'toastNotification';
            toast.className = `toast-notification ${type}`;
            
            let title = type === 'success' ? 'Success' : 'Error';
            let icon = type === 'success' ? 'check-circle' : 'exclamation-circle';
            let bgColor = type === 'success' ? 'var(--success-light)' : 'var(--danger-light)';
            let color = type === 'success' ? 'var(--success)' : 'var(--danger)';
            
            toast.innerHTML = `
                <div class="toast-icon" style="background: ${bgColor}; color: ${color};">
                    <i class="fas fa-${icon}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.closest('.toast-notification').remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) toast.remove();
                }, 300);
            }, 5000);
        }

        function updateCharCount() {
            const description = el('companyDescription').value;
            const count = description.length;
            charCount.textContent = `${count}/500 characters`;
            
            if (count > 500) {
                charCount.style.color = 'var(--danger)';
            } else if (count > 400) {
                charCount.style.color = 'var(--warning)';
            } else {
                charCount.style.color = 'var(--gray-500)';
            }
        }

        function checkPasswordStrength(password) {
            let score = 0;
            
            if (password.length >= 8) score += 1;
            if (password.length >= 12) score += 1;
            if (/[a-z]/.test(password)) score += 1;
            if (/[A-Z]/.test(password)) score += 1;
            if (/[0-9]/.test(password)) score += 1;
            if (/[^A-Za-z0-9]/.test(password)) score += 1;
            
            if (score <= 2) return { level: 'weak', percent: 25, text: 'Weak' };
            if (score <= 4) return { level: 'fair', percent: 50, text: 'Fair' };
            if (score <= 6) return { level: 'good', percent: 75, text: 'Good' };
            return { level: 'strong', percent: 100, text: 'Strong' };
        }

        function updatePasswordStrength(password) {
            if (!password) {
                passwordStrength.style.display = 'none';
                return;
            }
            
            passwordStrength.style.display = 'block';
            const strength = checkPasswordStrength(password);
            
            strengthFill.className = 'strength-bar ' + strength.level;
            strengthFill.style.width = strength.percent + '%';
            strengthText.textContent = strength.text;
            
            const labels = {
                weak: 'Weak - Add more characters and variety',
                fair: 'Fair - Add uppercase & numbers',
                good: 'Good - Add special characters',
                strong: 'Strong password!'
            };
            
            document.querySelector('.strength-label').textContent = labels[strength.level];
        }

        function validateForm() {
            const fullName = el('fullName').value.trim();
            const position = el('position').value.trim();
            const email = el('email').value.trim();
            const phone = el('phone').value.trim();
            const companyName = el('companyName').value.trim();
            const industry = el('industry').value;
            const companySize = el('companySize').value;
            const location = el('location').value.trim();
            const username = el('username').value.trim();
            const password = el('password').value;
            const confirmPassword = el('confirmPassword').value;
            const termsAccepted = el('terms').checked;
            
            if (!fullName || !position || !email || !phone || !companyName || !industry || 
                !companySize || !location || !username || !password || !confirmPassword) {
                showError('Please fill all required fields');
                return false;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showError('Please enter a valid email address');
                el('email').focus();
                return false;
            }
            
            const freeEmailDomains = ['gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 'icloud.com'];
            const emailDomain = email.split('@')[1];
            if (freeEmailDomains.includes(emailDomain?.toLowerCase())) {
                showError('Please use your company email address for verification');
                el('email').focus();
                return false;
            }
            
            const phoneRegex = /^[\+]?[0-9\s\-\(\)]+$/;
            if (!phoneRegex.test(phone)) {
                showError('Please enter a valid phone number');
                el('phone').focus();
                return false;
            }
            
            const usernameRegex = /^[a-zA-Z0-9_]+$/;
            if (!usernameRegex.test(username)) {
                showError('Username can only contain letters, numbers, and underscores');
                el('username').focus();
                return false;
            }
            
            if (username.length < 3) {
                showError('Username must be at least 3 characters long');
                el('username').focus();
                return false;
            }
            
            if (password.length < 8) {
                showError('Password must be at least 8 characters long');
                el('password').focus();
                return false;
            }
            
            if (password !== confirmPassword) {
                showError('Passwords do not match');
                el('confirmPassword').focus();
                return false;
            }
            
            if (!termsAccepted) {
                showError('You must accept Terms & Conditions');
                return false;
            }
            
            return true;
        }

        el('togglePwd').addEventListener('click', () => {
            const inp = el('password');
            const ic = el('togglePwd');
            if (inp.type === 'password') {
                inp.type = 'text';
                ic.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                inp.type = 'password';
                ic.classList.replace('fa-eye-slash', 'fa-eye');
            }
        });

        el('toggleConfirmPwd').addEventListener('click', () => {
            const inp = el('confirmPassword');
            const ic = el('toggleConfirmPwd');
            if (inp.type === 'password') {
                inp.type = 'text';
                ic.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                inp.type = 'password';
                ic.classList.replace('fa-eye-slash', 'fa-eye');
            }
        });

        el('password').addEventListener('input', function() {
            updatePasswordStrength(this.value);
        });

        el('companyDescription').addEventListener('input', updateCharCount);

        async function isUsernameTaken(username) {
            if (!username || username.length < 3) return false;
            const usersRef = collection(db, 'users');
            const q = query(usersRef, where('username', '==', username));
            const snap = await getDocs(q);
            return !snap.empty;
        }

        let usernameCheckTimeout;
        el('username').addEventListener('input', function() {
            const username = this.value.trim();
            clearTimeout(usernameCheckTimeout);
            
            if (username.length >= 3) {
                const feedback = el('usernameFeedback');
                feedback.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Checking availability...';
                feedback.className = 'username-feedback';
                
                usernameCheckTimeout = setTimeout(async () => {
                    const taken = await isUsernameTaken(username);
                    if (taken) {
                        feedback.innerHTML = '<i class="fas fa-times-circle"></i> Username is already taken';
                        feedback.className = 'username-feedback unavailable';
                        showError('Username is already taken');
                    } else {
                        feedback.innerHTML = '<i class="fas fa-check-circle"></i> Username is available';
                        feedback.className = 'username-feedback available';
                        clearError();
                    }
                }, 500);
            } else {
                el('usernameFeedback').innerHTML = '';
            }
        });

        async function uploadCompanyFile(uid, file, type) {
            if (!file) return null;
            
            const validImageTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
            const validDocTypes = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];
            
            let maxBytes;
            let validTypes;
            
            if (type === 'logo') {
                maxBytes = 5 * 1024 * 1024;
                validTypes = validImageTypes;
            } else if (type === 'license') {
                maxBytes = 10 * 1024 * 1024;
                validTypes = validDocTypes;
            } else {
                throw new Error('Invalid file type');
            }
            
            if (!validTypes.includes(file.type)) {
                throw new Error(`Please upload a valid file (${type === 'logo' ? 'JPG, PNG, GIF' : 'PDF, JPG, PNG'})`);
            }
            
            if (file.size > maxBytes) {
                throw new Error(`File too large (max ${type === 'logo' ? '5MB' : '10MB'})`);
            }
            
            const ext = file.name.split('.').pop();
            const path = `company_${type}s/${uid}_${Date.now()}.${ext}`;
            const sRef = storageRef(storage, path);
            const snapshot = await uploadBytes(sRef, file);
            const url = await getDownloadURL(snapshot.ref);
            return url;
        }

        signupBtn.addEventListener('click', async () => {
            if (!validateForm()) {
                return;
            }
            
            const fullName = el('fullName').value.trim();
            const position = el('position').value.trim();
            const email = el('email').value.trim();
            const phone = el('phone').value.trim();
            const companyName = el('companyName').value.trim();
            const registrationNumber = el('registrationNumber').value.trim();
            const industry = el('industry').value;
            const companySize = el('companySize').value;
            const website = el('website').value.trim();
            const location = el('location').value.trim();
            const companyDescription = el('companyDescription').value.trim();
            const username = el('username').value.trim();
            const password = el('password').value;
            const logoFile = el('companyLogo').files[0] || null;
            const licenseFile = el('businessLicense').files[0] || null;
            
            const taken = await isUsernameTaken(username);
            if (taken) {
                showError('Username is already taken. Please choose another.');
                el('username').focus();
                return;
            }
            
            signupBtn.disabled = true;
            const originalText = signupBtn.innerHTML;
            signupBtn.innerHTML = '<span class="spinner"></span> Creating account...';
            
            const signupCard = document.querySelector('.signup-card');
            signupCard.classList.add('loading');
            
            try {
                const userCred = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCred.user;
                
                let logoURL = null;
                let licenseURL = null;
                
                if (logoFile) {
                    try {
                        logoURL = await uploadCompanyFile(user.uid, logoFile, 'logo');
                        showToast('Company logo uploaded successfully!', 'success');
                    } catch (uploadError) {
                        console.warn('Logo upload error:', uploadError);
                    }
                }
                
                if (licenseFile) {
                    try {
                        licenseURL = await uploadCompanyFile(user.uid, licenseFile, 'license');
                        showToast('Business license uploaded successfully!', 'success');
                    } catch (uploadError) {
                        console.warn('License upload error:', uploadError);
                    }
                }
                
                await setDoc(doc(db, 'companies', user.uid), {
                    uid: user.uid,
                    contactPerson: {
                        name: fullName,
                        position: position,
                        email: email,
                        phone: phone
                    },
                    companyInfo: {
                        name: companyName,
                        registrationNumber: registrationNumber || null,
                        industry: industry,
                        size: companySize,
                        website: website || null,
                        location: location,
                        description: companyDescription || null,
                        logoURL: logoURL || null,
                        licenseURL: licenseURL || null
                    },
                    username: username,
                    email: email,
                    role: 'employer',
                    createdAt: serverTimestamp(),
                    lastLogin: serverTimestamp(),
                    emailVerified: false,
                    accountStatus: 'pending',
                    verificationStatus: 'unverified',
                    profileComplete: 70
                });
                
                try {
                    await updateProfile(user, {
                        displayName: fullName,
                        photoURL: logoURL || null
                    });
                } catch (profileError) {
                    console.warn('Profile update error:', profileError);
                }
                
                try {
                    await sendEmailVerification(user);
                    showToast('Verification email sent! Please check your inbox.', 'success');
                } catch (verificationError) {
                    console.warn('Verification email error:', verificationError);
                }
                
                signupCard.classList.remove('loading');
                signupCard.classList.add('success');
                showSuccess('Company account created successfully! Redirecting to dashboard...');
                
                signupBtn.innerHTML = '<i class="fas fa-check"></i> Account Created!';
                
                localStorage.setItem('angaza_company', JSON.stringify({
                    uid: user.uid,
                    companyName: companyName,
                    contactPerson: fullName,
                    email: email,
                    role: 'employer',
                    logoURL: logoURL
                }));
                
                setTimeout(() => {
                    window.location.href = 'bigmand.html';
                }, 2000);
                
            } catch (error) {
                console.error('Signup error:', error);
                
                signupCard.classList.remove('loading');
                signupCard.classList.add('shake');
                setTimeout(() => signupCard.classList.remove('shake'), 500);
                
                signupBtn.disabled = false;
                signupBtn.innerHTML = originalText;
                
                let errorMessage = '';
                switch(error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage = 'This email is already registered. Please sign in instead.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Please enter a valid email address.';
                        break;
                    case 'auth/weak-password':
                        errorMessage = 'Password is too weak. Please choose a stronger password.';
                        break;
                    case 'auth/network-request-failed':
                        errorMessage = 'Network error. Please check your connection and try again.';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage = 'Too many attempts. Please try again later.';
                        break;
                    default:
                        errorMessage = error.message || 'Signup failed. Please try again.';
                }
                
                showError(errorMessage);
                showToast(errorMessage, 'error');
            }
        });

        backBtn.addEventListener('click', function() {
            window.history.back();
        });
    </script>

    <script>
        function handleCancel() {
            if (document.referrer && document.referrer.includes(window.location.hostname)) {
                window.history.back();
            } else {
                window.location.href = 'index.html';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const fullName = el('fullName');
                if (fullName) fullName.focus();
            }, 300);
            
            updateCharCount();
            
            const inputs = document.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('blur', function() {
                    if (this.hasAttribute('required') && !this.value.trim()) {
                        this.style.borderColor = 'var(--danger)';
                    } else {
                        this.style.borderColor = '';
                    }
                });
                
                input.addEventListener('input', function() {
                    this.style.borderColor = '';
                    clearError();
                });
            });
            
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !signupBtn.disabled) {
                    const activeElement = document.activeElement;
                    if (activeElement.tagName === 'INPUT' || activeElement.tagName === 'SELECT' || activeElement.tagName === 'TEXTAREA') {
                        e.preventDefault();
                        signupBtn.click();
                    }
                }
            });
            
            el('companyLogo').addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) {
                        showError('Company logo is too large (max 5MB)');
                        this.value = '';
                    } else {
                        clearError();
                        showToast('Company logo selected', 'success');
                    }
                }
            });
            
            el('businessLicense').addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    if (file.size > 10 * 1024 * 1024) {
                        showError('Business license is too large (max 10MB)');
                        this.value = '';
                    } else {
                        clearError();
                        showToast('Business license selected', 'success');
                    }
                }
            });
        });
    </script>
</body>
</html>
